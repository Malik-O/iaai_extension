<!DOCTYPE html>
<html dir="rtl" lang="ar">
	<head>
		<title>مساعد IAAI</title>
		<link href="./chatter.css" rel="stylesheet" type="text/css" />
		<link href="../style.css" rel="stylesheet" type="text/css" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Cairo:wght@400;500;700&display=swap"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
		/>
	</head>

	<body>
		<div id="navbar-placeholder"></div>
		<script src="../components/inject-navbar.js"></script>

		<div class="app-container">
			<div class="chatter-container">
				<div class="chatter-header">
					<h2><i class="fab fa-whatsapp"></i> بوابة واتساب</h2>
					<div id="connection-status" class="chatter-status offline">
						<span class="status-dot"></span> غير متصل
					</div>
					<button id="refresh-page" class="action-button">
						<i class="fas fa-sync-alt"></i> تحديث
					</button>
				</div>

				<div class="whatsapp-portal" id="whatsapp-portal">
					<!-- Connection Section -->
					<div class="portal-section" id="connection-section">
						<h2>1. الاتصال بواتساب</h2>
						<div class="connection-actions">
							<button id="init-whatsapp" class="primary-button">
								<i class="fab fa-whatsapp"></i> اتصال بواتساب
							</button>
							<button
								id="logout-whatsapp"
								class="secondary-button"
								disabled
							>
								<i class="fas fa-sign-out-alt"></i> قطع الاتصال
							</button>
						</div>

						<div id="qr-container" class="qr-container">
							<div id="qr-loading" class="qr-loading">
								<div class="spinner"></div>
								<p>جاري إنشاء رمز QR...</p>
							</div>
							<div id="qr-code" class="qr-code"></div>
							<p class="qr-instructions">
								امسح الرمز باستخدام واتساب على هاتفك
							</p>
						</div>
					</div>

					<!-- Recipient Selection Section -->
					<div class="portal-section" id="recipient-section">
						<h2>2. اختيار المستلم</h2>
						<div class="contact-search-wrapper">
							<div class="contact-search-container">
								<div class="search-input-wrapper">
									<i class="fas fa-search search-icon"></i>
									<input
										type="text"
										id="contact-search"
										placeholder="ابحث عن شخص، مجموعة أو أدخل رقم..."
										autocomplete="off"
									/>
									<button
										id="clear-search"
										class="clear-search-btn"
									>
										<i class="fas fa-times"></i>
									</button>
								</div>
								<div
									id="search-results"
									class="search-results-container"
								>
									<!-- نتائج البحث ستظهر هنا -->
									<div class="no-results-yet">
										<p>
											ابدأ الكتابة للبحث في جهات الاتصال
										</p>
									</div>
								</div>
							</div>
						</div>

						<div
							class="selected-recipient-container"
							id="selected-recipient"
						>
							<!-- سيتم عرض المستلم المختار هنا -->
						</div>
					</div>

					<!-- Cart Items Preview Section -->
					<div class="portal-section" id="cart-preview-section">
						<h2>3. مراجعة عناصر العربة</h2>
						<div id="cart-preview" class="cart-preview">
							<div class="cart-loading">
								<div class="spinner"></div>
								<p>جاري تحميل عناصر العربة...</p>
							</div>
							<!-- Cart items will be shown here -->
						</div>
					</div>

					<!-- Send Options Section -->
					<div class="portal-section" id="send-options-section">
						<h2>4. إرسال إلى واتساب</h2>
						<div class="message-options">
							<div class="message-template">
								<label for="message-template"
									>قالب الرسالة:</label
								>
								<textarea
									id="message-template"
									rows="3"
									placeholder="رسالة لإرفاقها مع العناصر الخاصة بك."
								>
هذي السيارات اللي مناسبة لك:</textarea
								>
							</div>

							<div class="send-actions">
								<button
									id="send-to-whatsapp"
									class="primary-button"
									disabled
								>
									<i class="fab fa-whatsapp"></i> إرسال إلى
									واتساب
								</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Status Messages -->
				<div id="status-messages" class="status-messages"></div>
			</div>
		</div>

		<script src="./chatter.js"></script>
	</body>
</html>
